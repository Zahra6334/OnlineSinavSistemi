@model OnlineSinavSistemi.Models.Exam
@{
    ViewData["Title"] = "Sınav Sil";
}

<div class="container-fluid py-5">
    <!-- Başlık -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="d-flex align-items-center mb-3">
                <i class="bi bi-exclamation-triangle display-4 text-danger me-3"></i>
                <div>
                    <h1 class="display-5 fw-bold text-dark mb-1">Sınav Sil</h1>
                    <p class="text-muted mb-0">Bu işlem geri alınamaz</p>
                </div>
            </div>
            <div class="border-bottom pb-3"></div>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card border-danger border-3">
                <div class="card-body p-5">
                    <!-- Sınav Bilgileri -->
                    <div class="card border-0 shadow-sm mb-4">
                        <div class="card-body p-4">
                            <h4 class="fw-bold text-dark mb-3">@Model.Title</h4>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <div class="d-flex align-items-center">
                                        <div class="bg-primary bg-opacity-10 p-2 rounded-3 me-3">
                                            <i class="bi bi-book text-primary"></i>
                                        </div>
                                        <div>
                                            <h6 class="fw-bold text-muted mb-1">Ders</h6>
                                            <p class="mb-0">@Model.Course?.CourseName</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="d-flex align-items-center">
                                        <div class="bg-primary bg-opacity-10 p-2 rounded-3 me-3">
                                            <i class="bi bi-stopwatch text-primary"></i>
                                        </div>
                                        <div>
                                            <h6 class="fw-bold text-muted mb-1">Süre</h6>
                                            <p class="mb-0">@Model.DurationMinutes dakika</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 mb-3">
                                    <div class="d-flex align-items-center">
                                        <div class="bg-primary bg-opacity-10 p-2 rounded-3 me-3">
                                            <i class="bi bi-calendar text-primary"></i>
                                        </div>
                                        <div>
                                            <h6 class="fw-bold text-muted mb-1">Başlangıç Tarihi</h6>
                                            <p class="mb-0">@Model.StartDate.ToString("dd.MM.yyyy HH:mm")</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="d-flex align-items-center">
                                        <div class="bg-primary bg-opacity-10 p-2 rounded-3 me-3">
                                            <i class="bi bi-question-circle text-primary"></i>
                                        </div>
                                        <div>
                                            <h6 class="fw-bold text-muted mb-1">Toplam Soru</h6>
                                            <p class="mb-0">@Model.Questions?.Count soru</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="d-flex align-items-center">
                                        <div class="bg-primary bg-opacity-10 p-2 rounded-3 me-3">
                                            <i class="bi bi-people text-primary"></i>
                                        </div>
                                        <div>
                                            <h6 class="fw-bold text-muted mb-1">Katılımcı Sayısı</h6>
                                            <p class="mb-0">@Model.StudentExams?.Count öğrenci</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Silme Uyarıları -->
                    <div class="alert alert-danger border-0 rounded-3">
                        <div class="d-flex">
                            <i class="bi bi-exclamation-triangle-fill fs-4 me-3"></i>
                            <div>
                                <h6 class="alert-heading mb-2">Silme işlemi geri alınamaz!</h6>
                                <p class="mb-0">
                                    • Bu sınavı sildiğinizde tüm sorular ve öğrenci cevapları da silinecektir.<br>
                                    • Silinen sınavı ve ilişkili verileri geri getiremezsiniz.<br>
                                    • Öğrencilerin bu sınavla ilgili notları da silinecektir.<br>
                                    • Toplam <strong>@Model.Questions?.Count soru</strong> ve <strong>@Model.StudentExams?.Count öğrenci kaydı</strong> silinecek.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Butonlar -->
                <div class="card-footer bg-transparent border-top p-4">
                    <form asp-action="Delete" method="post" class="d-flex justify-content-between">
                        <input type="hidden" asp-for="Id" />
                        @Html.AntiForgeryToken()

                        <a asp-action="Index" class="btn btn-secondary btn-lg px-4">
                            <i class="bi bi-x-circle me-2"></i>İptal
                        </a>

                        <button type="submit" class="btn btn-danger btn-lg px-4" onclick="return confirmDelete()">
                            <i class="bi bi-trash3-fill me-2"></i>Evet, Sınavı Sil
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bilgilendirme -->
    <div class="row justify-content-center mt-4">
        <div class="col-lg-8">
            <div class="alert alert-info border-0 rounded-3 shadow-sm">
                <div class="d-flex align-items-center">
                    <i class="bi bi-info-circle-fill fs-3 me-3"></i>
                    <div>
                        <h5 class="alert-heading mb-2">Sınav Silme Hakkında</h5>
                        <p class="mb-0">
                            • Sınav silme işlemi geri alınamaz. Lütfen işlem yapmadan önce emin olun.<br>
                            • Silmek yerine sınavı yayından kaldırmayı da düşünebilirsiniz.<br>
                            • Emin değilseniz "İptal" butonu ile sınavlar listesine dönebilirsiniz.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

<!-- Inline Styles -->
<style>
    .card.border-danger {
        border-width: 2px !important;
        border-color: #dc3545 !important;
    }

    .btn-danger {
        background-color: #dc3545;
        border-color: #dc3545;
        transition: all 0.3s ease;
    }

        .btn-danger:hover {
            background-color: #bb2d3b;
            border-color: #b02a37;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(220, 53, 69, 0.3);
        }

    .alert-danger {
        background-color: #f8d7da;
        border-color: #f5c2c7;
        color: #842029;
    }

    .alert-info {
        background-color: #cff4fc;
        border-color: #b6effb;
        color: #055160;
    }
</style>

@section Scripts {
    <script>
        function confirmDelete() {
            var questionCount = @Model.Questions?.Count ?? 0;
            var studentCount = @Model.StudentExams?.Count ?? 0;

            var message = "Bu sınavı silmek istediğinize emin misiniz?\n\n";
            message += "Silinecekler:\n";
            message += `• ${questionCount} soru\n`;
            message += `• ${studentCount} öğrenci kaydı\n\n`;
            message += "Bu işlem geri alınamaz!";

            return confirm(message);
        }
    </script>
}