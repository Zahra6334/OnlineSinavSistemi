@page
@model LoginModel
@{
    ViewData["Title"] = "Giriş Yap";
}

<div class="container-fluid bg-gradient-primary bg-opacity-10" style="min-height: 100vh;">
    <div class="row justify-content-center align-items-center py-5" style="min-height: 90vh;">
        <div class="col-xl-6 col-lg-8 col-md-10">
            <div class="card border-0 shadow-lg overflow-hidden mx-auto" style="max-width: 600px;">
                <div class="row g-0">
                    <!-- Sol Taraf - Giriş Formu -->
                    <div class="col-lg-12 p-5">
                        <div class="text-center mb-4">
                            <i class="bi bi-shield-lock display-4 text-primary"></i>
                            <h1 class="h3 fw-bold text-dark mt-3">Hesabınıza Giriş Yapın</h1>
                            <p class="text-muted">Sınav sistemine erişmek için giriş yapın</p>
                        </div>

                        <form id="account" method="post">
                            <div asp-validation-summary="ModelOnly" class="alert alert-danger alert-dismissible fade show" role="alert">
                                <span></span>
                                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                            </div>

                            <!-- Email Input -->
                            <div class="input-group mb-4">
                                <span class="input-group-text bg-light border-end-0">
                                    <i class="bi bi-envelope text-primary"></i>
                                </span>
                                <div class="form-floating flex-grow-1">
                                    <input asp-for="Input.Email" class="form-control border-start-0"
                                           autocomplete="username" aria-required="true"
                                           placeholder="ornek@email.com" />
                                    <label asp-for="Input.Email" class="text-muted">
                                        <i class="bi bi-person me-1"></i>E-posta Adresiniz
                                    </label>
                                </div>
                                <span asp-validation-for="Input.Email" class="invalid-feedback d-block"></span>
                            </div>

                            <!-- Password Input -->
                            <div class="input-group mb-3">
                                <span class="input-group-text bg-light border-end-0">
                                    <i class="bi bi-key text-primary"></i>
                                </span>
                                <div class="form-floating flex-grow-1">
                                    <input asp-for="Input.Password" class="form-control border-start-0"
                                           autocomplete="current-password" aria-required="true"
                                           placeholder="şifre" />
                                    <label asp-for="Input.Password" class="text-muted">
                                        <i class="bi bi-shield me-1"></i>Şifreniz
                                    </label>
                                </div>
                                <span asp-validation-for="Input.Password" class="invalid-feedback d-block"></span>
                            </div>

                            <!-- Remember Me & Links -->
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" asp-for="Input.RememberMe"
                                           id="rememberMe" />
                                    <label class="form-check-label text-muted" for="rememberMe">
                                        <i class="bi bi-check2-square me-1"></i>Beni Hatırla
                                    </label>
                                </div>
                                <a id="forgot-password" asp-page="./ForgotPassword"
                                   class="text-decoration-none text-primary">
                                    <i class="bi bi-question-circle me-1"></i>Şifremi Unuttum
                                </a>
                            </div>

                            <!-- Login Button -->
                            <button id="login-submit" type="submit"
                                    class="btn btn-primary btn-lg w-100 py-3 rounded-3 shadow-sm">
                                <i class="bi bi-box-arrow-in-right me-2"></i>Giriş Yap
                            </button>

                            <!-- Register Link -->
                            <div class="text-center mt-4">
                                <p class="text-muted mb-2">Henüz hesabınız yok mu?</p>
                                <a asp-page="./Register" asp-route-returnUrl="@Model.ReturnUrl"
                                   class="btn btn-outline-primary rounded-3 px-4">
                                    <i class="bi bi-person-plus me-2"></i>Yeni Hesap Oluştur
                                </a>
                            </div>
                        </form>

                        <!-- Harici Giriş Bölümü -->
                        <div class="mt-5 pt-4 border-top">
                            @{
                                if ((Model.ExternalLogins?.Count ?? 0) == 0)
                                {
                                    <div class="text-center">
                                        <p class="text-muted">Harici kimlik doğrulama servisi bulunamadı.</p>
                                    </div>
                                }
                                else
                                {
                                    <div class="text-center">
                                        <h5 class="mb-3 text-muted">Diğer yöntemlerle giriş yapın</h5>
                                        <form id="external-account" asp-page="./ExternalLogin"
                                              asp-route-returnUrl="@Model.ReturnUrl" method="post">
                                            <div class="row g-2">
                                                @foreach (var provider in Model.ExternalLogins!)
                                                {
                                                    <div class="col-12">
                                                        <button type="submit"
                                                                class="btn btn-outline-secondary w-100 py-2 rounded-3"
                                                                name="provider" value="@provider.Name"
                                                                title="@provider.DisplayName hesabınızla giriş yapın">
                                                            <i class="bi bi-@provider.Name.ToLower() me-2"></i>
                                                            @provider.DisplayName ile Giriş Yap
                                                        </button>
                                                    </div>
                                                }
                                            </div>
                                        </form>
                                    </div>
                                }
                            }
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alt Linkler -->
            <div class="text-center mt-4">
                <a href="/" class="text-decoration-none text-muted">
                    <i class="bi bi-house me-1"></i>Ana Sayfaya Dön
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

<!-- Inline Styles for Centering -->
<style>
    .bg-gradient-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    }

    .card {
        margin: 0 auto;
    }

    .form-control:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 0.25rem rgba(102, 126, 234, 0.25);
    }

    .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        border: none;
    }
</style>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}